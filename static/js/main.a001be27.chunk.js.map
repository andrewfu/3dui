{"version":3,"sources":["textures/1_nx.jpg","textures/1_ny.jpg","textures/1_nz.jpg","textures/1_px.jpg","textures/1_py.jpg","textures/1_pz.jpg","components/with-sp-auth/pnp.js","components/with-sp-auth/with-sp-auth.jsx","config/config.js","components/with-sp-auth/index.js","components/scene3/scene3.jsx","components/scene3/index.js","components/startup/startup.jsx","actions/site.js","utl/common.js","utl/actions.js","components/startup/index.js","components/startup/startup-container.js","reducers/index.js","reducers/site.js","components/app/store.js","components/app/index.js","components/app/app.jsx","index.js"],"names":["module","exports","PnPFetchClient","authContext","url","options","isUrlAbsolute","Error","this","getToken","getResource","token","resource","request","indexOf","scopes","acquireTokenSilent","response","accessToken","requiresInteraction","errorCode","acquireTokenRedirect","length","parser","document","createElement","href","protocol","hostname","BearerTokenFetchClient","msalInstance","UserAgentApplication","auth","authority","clientId","WithSpAuth","WrappedComponent","props","state","authenticated","renewIframe","hasError","errorMessage","handleRedirectCallback","setState","InitPnP","authErr","accountState","console","log","isCallback","window","location","hash","getAccount","loginRedirect","sp","setup","fetchClientFactory","baseUrl","React","files","px","py","pz","nx","ny","nz","activeObj","Ready","scene","startCameraPos","Vector3","camera","FreeCamera","canvas","getEngine","getRenderingCanvas","attachControl","angularSensibility","createDefaultLight","skybox","MeshBuilder","CreateBox","size","skyboxMaterial","StandardMaterial","backFaceCulling","reflectionTexture","CubeTexture","coordinatesMode","Texture","SKYBOX_MODE","diffuseColor","Color3","specularColor","material","ui","AdvancedDynamicTexture","CreateFullscreenUI","CreateSphere","segments","diameter","isVisible","registerInstancedBuffer","instancedBuffers","color","Color4","CreateVolume","btn1","CreateBottomPanel","isLocked","line","Line","alpha","lineWidth","dash","addControl","connectedControl","onPointerMove","ray","createPickingRay","pointerX","pointerY","Matrix","Identity","hit","pickWithRay","pickedMesh","Math","ceil","position","subtract","text","name","linkWithMesh","onPointerDown","requestPointerLock","msRequestPointerLock","mozRequestPointerLock","webkitRequestPointerLock","countToDelete","instances","i","dispose","pointerlockchange","controlEnabled","mozPointerLockElement","webkitPointerLockElement","msPointerLockElement","pointerLockElement","addEventListener","registerBeforeRender","Render","btn","Button","CreateSimpleButton","width","height","cornerRadius","background","horizontalAlignment","Control","HORIZONTAL_ALIGNMENT_LEFT","verticalAlignment","VERTICAL_ALIGNMENT_BOTTOM","textBlock","GetRandomInt","seed","random","baseObj","count","xDim","yDim","scale","instance","createInstance","x","y","z","s","scaling","Scene3","antialias","onSceneReady","onRender","id","siteTitle","GetSite","sitefetching","sitefetched","type","ServiceAction","dispatch","getState","a","serviceActionResult","payload","Fetch","web","get","site","Title","Startup","connect","title","bindActionCreators","combineReducers","action","createStore","reducer","applyMiddleware","thunk","createLogger","App","store","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.a001be27.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/1_nx.6f124809.jpg\";","module.exports = __webpack_public_path__ + \"static/media/1_ny.a23cd0ea.jpg\";","module.exports = __webpack_public_path__ + \"static/media/1_nz.25825739.jpg\";","module.exports = __webpack_public_path__ + \"static/media/1_px.8050c1af.jpg\";","module.exports = __webpack_public_path__ + \"static/media/1_py.62522803.jpg\";","module.exports = __webpack_public_path__ + \"static/media/1_pz.5b2a8580.jpg\";","import { BearerTokenFetchClient, isUrlAbsolute } from \"@pnp/common\";\r\n\r\nexport class PnPFetchClient extends BearerTokenFetchClient {\r\n  constructor(authContext) {\r\n    super(null);\r\n    this.authContext = authContext;\r\n  }\r\n\r\n  async fetch(url, options = {}) {\r\n    if (!isUrlAbsolute(url)) {\r\n      throw new Error(\"You must supply absolute urls to PnPFetchClient.fetch.\");\r\n    }\r\n\r\n    const token = await this.getToken(this.getResource(url));\r\n    this.token = token;\r\n    return super.fetch(url, options);\r\n  }\r\n\r\n  async getToken(resource) {\r\n    const request = {};\r\n\r\n    if (resource.indexOf(\"sharepoint\") !== -1) {\r\n      request.scopes = [`${resource}/AllSites.Read`];\r\n    } else if (resource.indexOf(\"graph\") !== -1) {\r\n      request.scopes = [\r\n        `${resource}/Group.Read.All`,\r\n        `${resource}/User.Read`,\r\n        `${resource}/profile`,\r\n      ];\r\n    }\r\n\r\n    try {\r\n      const response = await this.authContext.acquireTokenSilent(request);\r\n\r\n      return response.accessToken;\r\n    } catch (error) {\r\n      if (this.requiresInteraction(error.errorCode)) {\r\n        this.authContext.acquireTokenRedirect(request);\r\n      } else {\r\n        throw error;\r\n      }\r\n    }\r\n  }\r\n\r\n  requiresInteraction(errorCode) {\r\n    if (!errorCode || !errorCode.length) {\r\n      return false;\r\n    }\r\n    return (\r\n      errorCode === \"consent_required\" ||\r\n      errorCode === \"interaction_required\" ||\r\n      errorCode === \"login_required\"\r\n    );\r\n  }\r\n\r\n  getResource(url) {\r\n    const parser = document.createElement(\"a\");\r\n    parser.href = url;\r\n    return `${parser.protocol}//${parser.hostname}`;\r\n  }\r\n}\r\n","import { sp } from \"@pnp/sp\";\r\nimport * as React from \"react\";\r\n\r\nimport config, { siteUrl } from \"../../config/config\";\r\nimport { PnPFetchClient } from \"./pnp\";\r\nimport { UserAgentApplication } from \"msal\";\r\n\r\nexport const msalInstance = new UserAgentApplication({ auth: config });\r\n\r\nexport default function withAuth(WrappedComponent) {\r\n  return class Auth extends React.Component {\r\n    constructor(props) {\r\n      super(props);\r\n\r\n      this.state = {\r\n        authenticated: false,\r\n        renewIframe: false,\r\n        hasError: false,\r\n        errorMessage: null,\r\n      };\r\n    }\r\n\r\n    componentWillMount() {\r\n      msalInstance.handleRedirectCallback(\r\n        () => {\r\n          this.setState({\r\n            authenticated: true,\r\n          });\r\n          this.InitPnP();\r\n        },\r\n        (authErr, accountState) => {\r\n          console.log(authErr);\r\n          this.setState({\r\n            hasError: true,\r\n            errorMessage: authErr.errorMessage,\r\n          });\r\n        }\r\n      );\r\n\r\n      if (msalInstance.isCallback(window.location.hash)) {\r\n        this.setState({\r\n          renewIframe: true,\r\n        });\r\n        return;\r\n      }\r\n\r\n      if (!msalInstance.getAccount()) {\r\n        msalInstance.loginRedirect({});\r\n        return;\r\n      } else {\r\n        this.setState({ authenticated: true });\r\n        this.InitPnP();\r\n      }\r\n    }\r\n\r\n    render() {\r\n      if (this.state.renewIframe) {\r\n        return <div>hidden renew iframe - not visible</div>;\r\n      }\r\n\r\n      if (this.state.authenticated) {\r\n        return <WrappedComponent {...this.props} />;\r\n      }\r\n\r\n      if (this.state.hasError) {\r\n        return <div>{this.state.errorMessage}</div>;\r\n      }\r\n\r\n      return <div>Login in progress...</div>;\r\n    }\r\n\r\n    InitPnP() {\r\n      console.log(`init pnp`);\r\n      const fetchClientFactory = () => new PnPFetchClient(msalInstance);\r\n      sp.setup({ sp: { fetchClientFactory, baseUrl: siteUrl } });\r\n    }\r\n  };\r\n}\r\n","export default {\r\n  authority: \"https://login.microsoftonline.com/8f2729c9-155b-42ae-99a6-6c8dd2e286d5\",\r\n  clientId: \"993dcb6f-07c4-41dc-b789-0185c110408e\",\r\n};\r\n\r\nexport const siteUrl = \"https://openpoint.sharepoint.com\";\r\n","import WithSpAuth from \"./with-sp-auth\";\r\nexport default WithSpAuth;","import React from \"react\";\r\nimport SceneComponent from \"babylonjs-hook\";\r\nimport {\r\n  Vector3,\r\n  FreeCamera,\r\n  StandardMaterial,\r\n  CubeTexture,\r\n  Color3,\r\n  MeshBuilder,\r\n  Texture,\r\n  Color4,\r\n  Matrix,\r\n} from \"@babylonjs/core\";\r\n\r\nimport { AdvancedDynamicTexture, Line, Control, Button } from \"@babylonjs/gui\";\r\n\r\nimport nx from \"../../textures/1_nx.jpg\";\r\nimport ny from \"../../textures/1_ny.jpg\";\r\nimport nz from \"../../textures/1_nz.jpg\";\r\nimport px from \"../../textures/1_px.jpg\";\r\nimport py from \"../../textures/1_py.jpg\";\r\nimport pz from \"../../textures/1_pz.jpg\";\r\n\r\nconst files = [px, py, pz, nx, ny, nz];\r\n\r\nlet activeObj = null;\r\nlet activeInstance = null;\r\n\r\nconst Ready = (scene) => {\r\n  const startCameraPos = new Vector3(30, 15, -100);\r\n  var camera = new FreeCamera(\"camera1\", startCameraPos, scene);\r\n  const canvas = scene.getEngine().getRenderingCanvas();\r\n  camera.attachControl(canvas, true);\r\n  camera.angularSensibility = 5000;\r\n  scene.createDefaultLight();\r\n\r\n  var skybox = MeshBuilder.CreateBox(\"skyBox\", { size: 1000.0 }, scene);\r\n  var skyboxMaterial = new StandardMaterial(\"skyBox\", scene);\r\n  skyboxMaterial.backFaceCulling = false;\r\n  skyboxMaterial.reflectionTexture = new CubeTexture(\"\", scene, null, false, files);\r\n  skyboxMaterial.reflectionTexture.coordinatesMode = Texture.SKYBOX_MODE;\r\n  skyboxMaterial.diffuseColor = new Color3(0, 0, 0);\r\n  skyboxMaterial.specularColor = new Color3(0, 0, 0);\r\n  skybox.material = skyboxMaterial;\r\n\r\n  var ui = AdvancedDynamicTexture.CreateFullscreenUI(\"UI\");\r\n  activeObj = MeshBuilder.CreateSphere(\"baseSphere\", { segments: 16, diameter: 2 });\r\n  activeObj.isVisible = false;\r\n\r\n  activeObj.registerInstancedBuffer(\"color\", 4);\r\n  activeObj.instancedBuffers.color = new Color4(1, 1, 1, 1);\r\n\r\n  CreateVolume(activeObj);\r\n\r\n  const btn1 = CreateBottomPanel(ui);\r\n\r\n  var isLocked = false;\r\n  var line = new Line();\r\n  line.alpha = 0.5;\r\n  line.lineWidth = 5;\r\n  line.dash = [5, 10];\r\n  line.isVisible = false;\r\n  ui.addControl(line);\r\n  line.connectedControl = btn1;\r\n\r\n  scene.onPointerMove = () => {\r\n    var ray = scene.createPickingRay(scene.pointerX, scene.pointerY, Matrix.Identity(), camera);\r\n    var hit = scene.pickWithRay(ray);\r\n    if (hit.pickedMesh) {\r\n      const length = Math.ceil(hit.pickedMesh.position.subtract(camera.position).length());\r\n      btn1.text = `${hit.pickedMesh.name}-${length}`;\r\n      line.linkWithMesh(hit.pickedMesh);\r\n      line.isVisible = true;\r\n      //activeInstance = hit.pickedMesh;\r\n    } else {\r\n      btn1.text = \"\";\r\n      line.isVisible = false;\r\n      line.linkWithMesh(null);\r\n      //activeInstance = null;\r\n    }\r\n  };\r\n\r\n  scene.onPointerDown = () => {\r\n    if (!isLocked) {\r\n      canvas.requestPointerLock =\r\n        canvas.requestPointerLock ||\r\n        canvas.msRequestPointerLock ||\r\n        canvas.mozRequestPointerLock ||\r\n        canvas.webkitRequestPointerLock;\r\n      if (canvas.requestPointerLock) {\r\n        canvas.requestPointerLock();\r\n      }\r\n    }\r\n    var ray = scene.createPickingRay(scene.pointerX, scene.pointerY, Matrix.Identity(), camera);\r\n    var hit = scene.pickWithRay(ray);\r\n    let target = hit.pickedMesh;\r\n    if (target) {\r\n      const countToDelete = activeObj.instances.length;\r\n      for (let i = 0; i < countToDelete; i++) {\r\n        activeObj.instances[activeObj.instances.length - 1].dispose();\r\n      }\r\n      CreateVolume(activeObj);\r\n      camera.position = startCameraPos;\r\n      line.isVisible = false;\r\n    }\r\n  };\r\n  var pointerlockchange = function () {\r\n    var controlEnabled =\r\n      document.mozPointerLockElement ||\r\n      document.webkitPointerLockElement ||\r\n      document.msPointerLockElement ||\r\n      document.pointerLockElement ||\r\n      null;\r\n\r\n    if (!controlEnabled) {\r\n      isLocked = false;\r\n    } else {\r\n      isLocked = true;\r\n    }\r\n  };\r\n\r\n  document.addEventListener(\"pointerlockchange\", pointerlockchange, false);\r\n  document.addEventListener(\"mspointerlockchange\", pointerlockchange, false);\r\n  document.addEventListener(\"mozpointerlockchange\", pointerlockchange, false);\r\n  document.addEventListener(\"webkitpointerlockchange\", pointerlockchange, false);\r\n\r\n  scene.registerBeforeRender(() => {\r\n    if (activeInstance) {\r\n      let color = activeInstance.instancedBuffers.color;\r\n      activeInstance.instancedBuffers.color = new Color4(color.r, color.g, color.b, Math.random());\r\n    }\r\n  });\r\n};\r\n\r\nconst Render = (scene) => {};\r\n\r\nconst CreateBottomPanel = (ui) => {\r\n  const btn = Button.CreateSimpleButton(\"but\");\r\n\r\n  btn.width = \"350px\";\r\n  btn.height = \"40px\";\r\n  btn.color = \"white\";\r\n  btn.cornerRadius = 20;\r\n  btn.background = \"green\";\r\n  btn.alpha = \"0.5\";\r\n  btn.horizontalAlignment = Control.HORIZONTAL_ALIGNMENT_LEFT;\r\n  btn.verticalAlignment = Control.VERTICAL_ALIGNMENT_BOTTOM;\r\n  ui.addControl(btn);\r\n\r\n  return btn.textBlock;\r\n};\r\n\r\nconst GetRandomInt = (seed) => Math.ceil(Math.random() * seed);\r\n\r\nconst CreateVolume = (\r\n  baseObj,\r\n  count = GetRandomInt(100),\r\n  xDim = GetRandomInt(10),\r\n  yDim = GetRandomInt(10),\r\n  scale = 10\r\n) => {\r\n  for (let i = 0; i < count; i++) {\r\n    let instance = baseObj.createInstance(`${baseObj.name}${i}`);\r\n    const x = i % xDim;\r\n    const y = ((i - x) / xDim) % yDim;\r\n    const z = ((i - x) / xDim - y) / yDim;\r\n    instance.position.x = x * scale;\r\n    instance.position.y = y * scale;\r\n    instance.position.z = z * scale;\r\n    const s = GetRandomInt(3);\r\n    instance.scaling = new Vector3(s, s, s);\r\n    instance.instancedBuffers.color = new Color4(\r\n      Math.random(),\r\n      Math.random(),\r\n      Math.random(),\r\n      Math.random()\r\n    );\r\n  }\r\n};\r\n\r\nconst Scene3 = () => {\r\n  return <SceneComponent antialias onSceneReady={Ready} onRender={Render} id=\"my-canvas\" />;\r\n};\r\n\r\nexport default Scene3;\r\n","import Scene3 from \"./scene3\";\r\nexport default Scene3;\r\n","import React from \"react\";\r\nimport WithSpAuth from \"../with-sp-auth\";\r\nimport { msalInstance } from \"../with-sp-auth/with-sp-auth\";\r\nimport Scene3 from \"../scene3\";\r\n\r\nexport default WithSpAuth(({ siteTitle, GetSite, sitefetching, sitefetched }) => {\r\n  if (!sitefetching && !sitefetched) GetSite();\r\n  if (sitefetched) return <Scene3 />;\r\n  return <div>Loading...</div>;\r\n});\r\n","import * as Actions from \"../utl/actions\";\r\nimport { Fetch } from \"../utl/common\";\r\nimport { sp } from \"@pnp/sp\";\r\nimport \"@pnp/sp/webs\";\r\n\r\nexport const GetSite = () =>\r\n  Fetch({\r\n    type: Actions.FETCH_SITE,\r\n    ServiceAction: async () => {\r\n      const site = await sp.web.get();\r\n      console.log(site.Title);\r\n      return site;\r\n    },\r\n  });\r\n","export const Fetch = ({ type, ServiceAction }) => {\r\n  return async (dispatch, getState) => {\r\n    dispatch({ type });\r\n    try {\r\n      const serviceActionResult = await ServiceAction(getState);\r\n      dispatch({\r\n        type: `${type}_SUCCESS`,\r\n        payload: serviceActionResult,\r\n      });\r\n      return serviceActionResult;\r\n    } catch (error) {\r\n      dispatch({\r\n        type: `${type}_ERROR`,\r\n        payload: error,\r\n      });\r\n    }\r\n  };\r\n};\r\n","export const FETCH_SITE = \"FETCH_SITE\";\r\n","import Startup from \"./startup-container\";\r\nexport default Startup;\r\n","import { connect } from \"react-redux\";\r\nimport Startup from \"./startup\";\r\nimport { bindActionCreators } from \"redux\";\r\nimport { GetSite } from \"../../actions/site\";\r\n\r\nconst mapDispatchToProps = (dispatch) => bindActionCreators({ GetSite }, dispatch);\r\n\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    siteTitle: state.site.title,\r\n    sitefetching: state.site.sitefetching,\r\n    sitefetched: state.site.sitefetched,\r\n  };\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Startup);\r\n","import { combineReducers } from \"redux\";\r\nimport site from \"./site\";\r\nexport default combineReducers({ site });\r\n","import * as Actions from \"../utl/actions\";\r\n\r\nexport default (\r\n  state = {\r\n    title: \"\",\r\n    sitefetching: false,\r\n    sitefetched: false,\r\n  },\r\n  action\r\n) => {\r\n  switch (action.type) {\r\n    case Actions.FETCH_SITE:\r\n      return {\r\n        ...state,\r\n        sitefetching: true,\r\n        sitefetched: false,\r\n      };\r\n    case `${Actions.FETCH_SITE}_SUCCESS`:\r\n      return {\r\n        ...state,\r\n        sitefetching: false,\r\n        sitefetched: true,\r\n        title: action.payload.Title,\r\n      };\r\n  }\r\n  return state;\r\n};\r\n","import { createStore, applyMiddleware } from \"redux\";\r\nimport { createLogger } from \"redux-logger\";\r\nimport thunk from \"redux-thunk\";\r\nimport reducer from \"../../reducers\";\r\n\r\nexport default createStore(reducer, applyMiddleware(thunk, createLogger()));\r\n","import App from \"./app\";\r\nexport default App;\r\n","import React from \"react\";\r\nimport Startup from \"../startup\";\r\nimport { Provider } from \"react-redux\";\r\nimport store from \"./store\";\r\n\r\nexport default () => {\r\n  return (\r\n    <Provider store={store}>\r\n      <Startup />\r\n    </Provider>\r\n  );\r\n};\r\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./components/app\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}